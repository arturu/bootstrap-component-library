{% spaceless %}

{# Parameters:
  - label (string) (default: '')
  - path (string) (default: '')
  - variant (string) (default: '')
    - options ["primary", "secondary", "success", "danger", "warning", "info", "light", "dark"]
  - toggle (boolean) (default: false)
  - toggle_type (string) (default: 'button')
    - options ["button", "collapse"]
  - target (string) (default: '')
  - aria_expanded (string) (default: 'false')
  - id (string) (default: '')
  - extra_classes (string) (default: '')
  - extra_attributes (array of objects based on name - attribute name and value - attribute value)) (default: {})
  - icon (icon object) (default: {}): predefined structure for Icon component
  - icon_position (string) (default: after)
    - options ["after", "before"]
#}

{% set _label = label|default('') %}
{% set _path = path|default('') %}
{% set _variant = variant|default('') %}
{% set _toggle = toggle|default(false) %}
{% set _toggle_type = toggle_type|default('button') %}
{% set _target = target|default('') %}
{% set _aria_expanded = aria_expanded|default('false') %}
{% set _id = id|default('') %}
{% set _extra_classes = extra_classes|default('') %}
{% set _icon = icon|default({}) %}
{% set _icon_position = icon_position|default('after') %}
{% set _extra_attributes = '' %}
{% set _class = '' %}
{% if _icon is not empty %}
{% set _icon_markup %}
  {% include '@oe/icon/icon.html.twig' with _icon only %}
{% endset %}
{% endif %}

{% if _extra_classes is not empty %}
  {% set _class = _extra_classes %}
{% endif %}
{% if _variant is not empty %}
  {% set _class = _class ~ ' link-' ~ _variant %}
{% endif %}
{% if _toggle %}
  {% set _path = '#' ~ _target %}
{% endif %}
{% if extra_attributes is defined and extra_attributes is not empty and extra_attributes is iterable %}
  {% for attr in extra_attributes %}
    {% if attr.value is defined %}
      {% set _extra_attributes = _extra_attributes ~ ' ' ~ attr.name|e('html_attr') ~ '="' ~ attr.value|e('html_attr') ~ '"' %}
    {% else %}
      {% set _extra_attributes = _extra_attributes ~ ' ' ~ attr.name|e('html_attr') %}
    {% endif %}
  {% endfor %}
{% endif %}

<a 
  href="{{ _path }}"
{% if _class is not empty %}
  class="{{ _class }}"
{% endif %}
{% if _id is not empty %}
  id="{{ _id }}"
{% endif %}
{% if _toggle %}
  data-bs-toggle="{{ _toggle_type }}"
  role="button"
{% if _toggle_type == 'collapse' %}
  aria-controls="{{ _target }}"
{% endif %}
{% if _toggle_type == 'collapse' or _toggle_type == 'dropdown' %}
  aria-expanded="{{ _aria_expanded }}"
{% endif %}
{% endif %}
{{ _extra_attributes|raw }}
>
  {%- if _icon_position == 'before' and _icon_markup is defined -%}
    {{ _icon_markup|raw }}
  {%- endif -%}
  {{- _label -}}
  {%- if _icon_position == 'after' and _icon_markup is defined -%}
    {{ _icon_markup|raw }}
  {%- endif -%}
</a>

{% endspaceless %}
